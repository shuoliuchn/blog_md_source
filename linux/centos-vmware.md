## 虚拟机安装 CentOS

[TOC]

### 下载安装包

#### 下载 VMware 安装包

各种软件，首推去官网下载。至少也要去靠得住的官方途径，比如阿里云镜像站，甚至 360 或腾讯的软件管家也是可靠的。千万不要去那些满是广告的小网站下载软件。我们不知道里面有没有被嵌入不好的东西。毕竟是运行在自己电脑上的，一切都要可靠才好。

VMware 的官方网站为：https://www.vmware.com/

最新版 VMware 的官方下载链接为：
https://download3.vmware.com/software/wkst/file/VMware-workstation-full-15.5.0-14665864.exe

#### 下载 CentOS 系统镜像

CentOS 系统也可以从官网 https://www.centos.org/ 下载。

但由于 CentOS 官网的服务器在国外，访问和下载速度会受一定的限制。所以，我们可以去阿里云镜像战下载 CentOS 的镜像。阿里云的安全性当然是值得信赖的。

阿里云镜像站的地址：https://developer.aliyun.com/mirror/

直接在浏览器中输入 mirrors.aliyun.com 也会跳转到阿里云镜像站。

![aliyun-mirror](centos-vmware.assets\aliyun-mirror.gif)

进入阿里云镜像站，点击 OS 镜像，选择我们需要的系统版本即可得到下载链接了。

CentOS 主要有三个版本：DVD、Everything 和 Minimal。其中，DVD 版本内置了主流的应用程序；Everything 内置所有应用程序；而 Minimal 版本是轻量级系统，不内置任何不必要的程序。对于我们学习和工作来说，Everything 版本太过臃肿，没有必要。我们使用 DVD 版本即可。

![centos-link](centos-vmware.assets\centos-link.gif)

### 安装 VMware

VMware 安装十分简单了，一路下一步即可。

如果打开安装包时提示需要重新启动。不必慌张，点击“是”重启电脑即可。需要注意的是，因为要重启电脑，一定要把该保存的文件都保存好，避免造成数据丢失。

![QQ截图20200203113011](centos-vmware.assets\QQ截图20200203113011.jpg)

### 在 VMware 上安装 CentOS 系统

打开 VMware，点击主页上的“创建新的虚拟机”按钮。

![1580795866233](centos-vmware.assets\1580795866233.png)

选择“自定义”，然后点击“下一步”。

![1580796039420](centos-vmware.assets\1580796039420.png)

接下来按照默认的配置，直接点“下一步”。

![1580796566407](centos-vmware.assets\1580796566407.png)

选择“稍后安装操作系统”，点击“下一步”。

![1580796666180](centos-vmware.assets\1580796666180.png)

选择我们要装的操作系统，当然是 Linux，CentOS 7 64 位，然后依旧“下一步”。

![1580796804818](centos-vmware.assets\1580796804818.png)

按需选择虚拟系统的存放位置，继续点击“下一步”。

![1580797198848](centos-vmware.assets\1580797198848.png)

根据需求和电脑硬件配置，分配给虚拟机处理器资源，然后点击“下一步”。

![1580797348650](centos-vmware.assets\1580797348650.png)

给虚拟机配置内存。建议1G，最少512M，同样需要综合考虑需求和电脑本身硬件的限制。也不宜过高，因为后续或许会有同时开启多个虚拟机的情况，要给其他虚拟机和主机留出余量。

![1580797555669](centos-vmware.assets\1580797555669.png)

选择需要的虚拟机联网的方式。至于选择何种网络类型，可以参考 [VMware 的网络连接类型](vmware-net-type.md)。选好之后，点击“下一步”即可。

![1580797811596](centos-vmware.assets\1580797811596.png)

接下来的“网络类型”、“I/O 控制器类型”和“磁盘类型”都只按默认选择即可，点击“下一步”就好。

![next](centos-vmware.assets\next.gif)

到了磁盘容量选择这块，按照建议给 20 GB 即可。当然也要量力而行，尽量不要小于 10 GB。然后选择是否立即分配所有磁盘空间。如果不勾选这个复选框，生成的虚拟机文件会很小。随着使用，文件会慢慢变大，直到设置的磁盘空间大小为止。至于存储为单个文件还是多个文件，就看个人需求了。选好之后，继续点“下一步”就是了。

![1580805748170](centos-vmware.assets\1580805748170.png)

设置磁盘文件的文件名，这个无所谓，一般就按默认来就好。要是修改的话，尽量不要改变后缀名。当然继续点击“下一步”。

![1580806051173](centos-vmware.assets\1580806051173.png)

接下来，**不要**急着点“完成”，我们要把 CentOS 的安装镜像文件挂载到虚拟机的光驱中。这里要点击“自定义硬件”。

![1580806199566](centos-vmware.assets\1580806199566.png)

其他的硬件我们差不多都已经配置完毕，唯独 DVD 光驱，所以先点击左边硬件设备中的“新 CD/DVD”。因为我们要使用已经下载好的 ISO 镜像文件，所以在右边勾选“使用 ISO 映像文件”。把我们下载好的 CentOS 镜像文件所在的目录写好。点击“关闭”，配置会自动保存。

![1580808534074](centos-vmware.assets\1580808534074.png)

这回就可以直接点击“完成”了。

![1580809410601](centos-vmware.assets\1580809410601.png)

在左侧“我的计算机”中出现我们新创建的 CentOS 系统，在 VMware 中安装 CentOS 的操作至此完成。

![1580809488443](centos-vmware.assets\1580809488443.png)

### 初始化配置 CentOS

点击“开启此虚拟机”，打开我们的虚拟机。

![1580809666523](centos-vmware.assets\1580809666523.png)

然后就是等待安装。期间也可以配合回车键，终止等待，快速选择。

需要注意的是，如果鼠标点击虚拟机，光标会被虚拟机捕获。快捷键 `ctrl + alt + esc` 可以释放鼠标光标。

初始化安装完成，首先会出现语言选择界面。左侧是系统语言，右侧是小键盘语言。因为英文报错信息检索起来更加容易，所以更推荐使用英文。当然也可以使用中文，问题也不大的。选择好语言，点击右下角的蓝色按钮“Continue”。

![1580810030196](centos-vmware.assets\1580810030196.png)

这时进入到其他系统配置页面。首先来到最底下，找到网络设置“NETWORK & HOST NAME”，点击进去。

![1580814935954](centos-vmware.assets\1580814935954.png)

把网卡旁边的按钮从“OFF”点成“ON”，开启网络连接。设置完成后，点击左上方蓝色的“Done”按钮，保存设置并退出。

![1580815129065](centos-vmware.assets\1580815129065.png)

磁盘分区“INSTALLATION DESTINATION”有一个橙色三角警告，意思是我们需要点进去配置一下。只需要点进去，然后什么也不用改，直接点左上角蓝色的“Done”按钮退出即可。

![1580815446817](centos-vmware.assets\1580815446817.png)

退出来之后，我们看到磁盘分区部分的警告标识已经不复存在。与此同时，右下角的开始安装按钮“Begin Installation”也从灰色的不可点击状态变成了蓝色可点击的状态。但是此时不要点安装按钮，上面还有一些配置需要设置。

![1580815761705](centos-vmware.assets\1580815761705.png)

来到页面最上面。最前面这几个选项，语言刚刚已经设置好，无需更改。软件安装源和预装软件按照默认设置即可。我们需要修改的是日期时间的设置。一定要确保时间准确，我们日后或许会设计定时任务，有准确的系统时间很重要。所以接下来要点及的是“DATE & TIME”。

![1580810536981](centos-vmware.assets\1580810536981.png)

首先设置时区为“Asia/Shanghai”。然后建议先把底部的时间设置为当前时间。最后，打开右上角的网络标准“Network Time”时间开关，将其设置为“ON”。这个设置需要有正常的网络连接，否则开关无法打开。设置完成后，点击左上角蓝色的“Done”按钮，保存并退出。

![1580816421287](centos-vmware.assets\1580816421287.png)

再然后，点击右下角蓝色的开始安装“Begin Installation”按钮即可。

![1580816780702](centos-vmware.assets\1580816780702.png)

系统配置安装的同时，我们可以管理系统的用户设置。左边是给 root 用户设置密码，右边是创建普通用户。我们只需设置 root 用户的密码即可，普通用户将来可以使用命令创建。

root 用户就相当于 Windows 系统的管理员用户

![1580817015738](centos-vmware.assets\1580817015738.png)

输入密码和重复密码即可。值得注意的是，由于键盘驱动等原因，键盘上的数字小键盘是不可用的。如需输入数字，请使用键盘字母区上面的数字输入。输入完成之后，依旧点击左上角蓝色的“Done”按钮保存并退出。如果密码太过简单的话，你可能需要点两次“Done”按钮才能退出。

还是劝大家，密码设置简单一点，不要为难自己，没人盗你的密码。如果有，再复杂也没有用~

![1580817206635](centos-vmware.assets\1580817206635.png)

配置完成后，会显示“Complete!”，并在右下角出现蓝色的完成配置“Finish configuration”按钮，点击即可。

![1580817439220](centos-vmware.assets\1580817439220.png)

经过等待，配置最终完毕，一切就绪，也会出现一个“Complete!”。右下角会出现一个重启“Reboot”按钮，点击重启。

![1580817745118](centos-vmware.assets\1580817745118.png)

重启完成后，进入经典的命令行黑框框。输入用户名和密码即可。用户名为 root，输入后回车确认。密码为刚刚设置的 root 用户的密码。输入时不会显示任何东西，大胆往里输入即可。输入完成也是回车确认，即可登录。

![1580818034535](centos-vmware.assets\1580818034535.png)

至此，我们完成了 CentOS 在 VMware 上的安装全过程。

我们可以使用命令 `ip addr` 查看虚拟机的 IP 地址。

![1580818633076](centos-vmware.assets\1580818633076.png)

也可以使用 `ifconfig` 命令查看 IP 地址。若命令不可用，需首先使用 `yum install  net-tools -y` 命令安装配置。

![1580818842206](centos-vmware.assets\1580818842206.png)

